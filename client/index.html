<!-- MAIN INDEX PAGE -->

<!doctype html>
<html lang="en" ng-app>
    <head>
        <title>Music Vizualization</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <!-- BOOTSTRAP Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="index.css">
        
        <!-- BOOTSTRAP SELECT Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/css/bootstrap-select.min.css">
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>
        
        <!-- FFmpeg converter -->
        <script src="https://4dbefa02675a4cdb7fc25d009516b060a84a3b4b.googledrive.com/host/0B6GWd_dUUTT8WjhzNlloZmZtdzA/ffmpeg_asm.js" async> </script>
        
        <!-- favicon -->
        <link rel="shortcut icon" href="/images/favicon.ico" />
        
    </head>
    
    <body>
            
        <div id="main-homepage">
            
            <div class="container">
                
                <div class="col-md-12 page-header">
                    <h3 style="float:left;">Home Page</h4>
                    <button type="button" id="ul-music-button" class="btn btn-primary" style="float:right;margin-top:20px;" onclick="uploadMusic()">Upload Music</button>
                </div>
                
                <div class="row">
                    <div class="col-md-4 portfolio-item">
                        <a onclick="liveSession()" href="#"><img class="img-responsive" src="images/live-banner.jpg" alt=""></a>
                        <h3><a onclick="liveSession()" href="#">Live Session</a></h3>
                        <p>Join your drawing skills with other users to produce a true masterpiece.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a onclick="solo()" href="#"><img class="img-responsive" src="images/solo-banner.jpg" alt=""></a>
                        <h3><a onclick="solo()" href="#">Solo Session</a></h3>
                        <p>Choose audio, resolution and start drawing, you can even undo the most recent action.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a onclick="records()" href="#"><img class="img-responsive" src="images/records-banner.jpg" alt=""></a>
                        <h3><a onclick="records()" href="#">Records</a></h3>
                        <p>Rewatch and download yours or other people's visualizations.</p>
                    </div>
                </div>
            </div>
        </div>
  
        <div id="main-live-session" style="display:none;">
        
            <div class="container">
        
                <div class="col-md-12 page-header">
                    <h3><a href="/">Home</a> <small><span class="glyphicon glyphicon-menu-right" style="margin-right:10px"></span></small>Live Session</h3>
                </div>
                
                <div class="col-md-4">
                    <div id="join-panel" class="panel panel-primary">
                        <div id="join-panel-heading" class="panel-heading clearfix">
                            <h3 class="panel-title pull-left" style="padding-top:6px;"><b>Available Rooms</b></h3>
                            <button id="refresh-button" type="button" class="btn btn-default btn-sm" style="float: right;" onclick="refreshRooms()"><span class="glyphicon glyphicon-refresh"></span></button>
                        </div>
                        <div id="join-panel-body" class="panel-body">
                            <ul id="join-list" class="list-group">
                            </ul>
                        </div>
                        <div id="join-panel-footer" class="panel-footer">
                            <form id="new-room-form" class="input-group" style="width: 100%">
                                <span class="input-group-addon" id="basic-addon1">Create Room:</span>
                                <input id="new-room-input" type="text" autocomplete="off" class="form-control" aria-describedby="basic-addon2">
                            </form>
                        </div>
                        <span id="join-error" class="label label-danger" style="visibility:hidden">Room name too long.</span>
                    </div>
                </div>
          
                <div class="col-md-4">
                    <div id="users-panel" class="panel panel-primary">
                        <div id="users-panel-heading" class="panel-heading">
                            <h3 class="panel-title" style="padding-top:6px;"><b>Users</b></h3>
                        </div>
                        <div id="users-panel-body" class="panel-body">
                            <ul id="users-list" class="list-group">
                            </ul>
                        </div>
                        <div id="user-panel-footer" class="panel-footer">
                            <form id="username-input-form" class="input-group" style="width: 100%">
                                <span class="input-group-addon" id="basic-addon1">Change Username:</span>
                                <input id="username-input" type="text" autocomplete="off" class="form-control" aria-describedby="basic-addon2">
                            </form>
                        </div>
                        <span id="username-error" class="label label-danger" style="visibility:hidden">Username too long.</span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div id="chat-panel" class="panel panel-primary">
                        <div id="chat-panel-heading" class="panel-heading">
                            <h3 class="panel-title" style="padding-top:6px;"><b>Chat</b></h3>
                        </div>
                        <div id="chat-panel-body" class="panel-body">
                        </div>
                        <div id="chat-panel-footer" class="panel-footer">
                            <form id="message-input-form" class="input-group" style="width: 100%">
                                <input id="message-input" type="text" autocomplete="off" class="form-control" placeholder="Your Message" aria-describedby="basic-addon2">
                            </form>
                        </div> 
                    </div>
                </div>
                <div class="col-md-4">
                </div>
                <div id="start-session-div" class="col-md-8" style="visibility:hidden;">
                    <div class="form-group" style="float:left;">
                        <label for="music-picker">Audio</label>
                        <div style="height:150px;overflow-y:auto;">
                            <ul id="music-picker" class="list-group">
                            </ul>
                        </div>
                    </div>
                    <div class="form-group" style="float:right;width:50%;">
                        <label for="bg-selector">Background</label>
                        <select id="bg-selector" class="selectpicker">
                            <option value="1">Black</option>
                            <option value="2">White</option>
                        </select>
                        <label style="margin-top:5px;"for="size-selector">Resolution</label>
                        <div>
                            <div style="width:75%;float:left;">
                                <select id="size-selector" class="selectpicker">
                                    <option value="1">640 x 480 (4:3)</option>
                                    <option value="2">1024 x 768 (4:3)</option>
                                    <option value="3">640 x 360 (16:9)</option>
                                    <option value="4">960 x 540 (16:9)</option>
                                    <option value="5">1280 x 720 (16:9)</option>
                                </select>
                            </div>
                            <div style="width:20%;float:right;">
                                <button id="start-session-button" style="float:right;" type="button" disabled="true" class="btn btn-primary" onclick="createSession()">Start</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            
        <div id="main-live-canvas" style="display:none;">
            
            <div id="canvas-header" class="page-header">
                
                <div class="col-md-12">
                    <div class="col-md-6">
                        <button id="play-button" type="button" class="play btn btn-default" onclick="playButtonPressed()">
                            <span id="play-icon" class="glyphicon glyphicon-play"></span>
                        </button>
                        <div id="progBar-div" class="progress">
                            <div id="progBar" class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <button id="mute-button" type="button" class="btn btn-default" onclick="muteButtonPressed()">
                            <span id="mute-icon" class="glyphicon glyphicon-volume-up"></span>
                        </button>
                    </div>
                    <div id="solo-bar" class="col-md-6" style="display:none">
                        <button id="undo-button" type="button" class="btn btn-primary" style="float:left;margin-right:20px;display:inline;" onclick="undo()">
                            <span class="glyphicon glyphicon-arrow-left"></span>
                        </button>
                        <h5 style="display:inline;"><b>Layers:</b></h5>
                        <select id="layerSel" style="display:inline;width:70px;margin-right:10px;" onchange="selectedLayer()" class="form-control">
                        </select>
                        <button id="new-layer-button" type="button" class="btn btn-primary" style="display:inline;" onclick="newLayer()">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                        <div id="visible-checkbox-div" onclick="layerVisibilityChanged()" class="checkbox" disabled="true" style="display:inline">
                            <label style="margin-left:10px;margin-right:10px;"><h5><input id="visible-checkbox" type="checkbox" value=""><b>Visible</b></h5></label>
                        </div>
                        <button id="finish-solo-button" type="button" class="btn btn-primary" style="display:inline;" onclick="finishSolo()">
                            <span class="glyphicon glyphicon-save"></span>
                        </button>
                        
                    </div>
                </div>
            </div>
            <div>
                <img src="/images/tool-templates.jpg" style="margin-bottom:10px;margin-left:20px;"/>
            </div>
            <div id="left-panel">
                <div id="tool-column" class="btn-group-vertical" role="group">
                    <div class="input-group tool-div">
                        <span id="toolLab1" class="input-group-addon tool-number" id="basic-addon1" style="background-color:black;color:white;"><b>A</b></span>
                        <button id="tool1" onclick="tool1()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab2" class="input-group-addon tool-number" id="basic-addon1"><b>B</b></span>
                        <button id="tool2" onclick="tool2()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab3" class="input-group-addon tool-number" id="basic-addon1"><b>C</b></span>
                        <button id="tool3" onclick="tool3()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab4" class="input-group-addon tool-number" id="basic-addon1"><b>D</b></span>
                        <button id="tool4" onclick="tool4()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab5" class="input-group-addon tool-number" id="basic-addon1"><b>E</b></span>
                        <button id="tool5" onclick="tool5()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab6" class="input-group-addon tool-number" id="basic-addon1"><b>F</b></span>
                        <button id="tool6" onclick="tool6()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab7" class="input-group-addon tool-number" id="basic-addon1"><b>G</b></span>
                        <button id="tool7" onclick="tool7()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab8" class="input-group-addon tool-number" id="basic-addon1"><b>H</b></span>
                        <button id="tool8" onclick="tool8()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab9" class="input-group-addon tool-number" id="basic-addon1"><b>I</b></span>
                        <button id="tool9" onclick="tool9()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab10" class="input-group-addon tool-number" id="basic-addon1"><b>J</b></span>
                        <button id="tool10" onclick="tool10()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab11" class="input-group-addon tool-number" id="basic-addon1"><b>K</b></span>
                        <button id="tool11" onclick="tool11()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab12" class="input-group-addon tool-number" id="basic-addon1"><b>L</b></span>
                        <button id="tool12" onclick="tool12()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab13" class="input-group-addon tool-number" id="basic-addon1"><b>M</b></span>
                        <button id="tool13" onclick="tool13()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                    <div class="input-group tool-div">
                        <span id="toolLab14" class="input-group-addon tool-number" id="basic-addon1"><b>N</b></span>
                        <button id="tool14" onclick="tool14()" type="button" class="btn btn-default tool" aria-describedby="basic-addon1"></button>
                    </div>
                </div>
                <div id="thickness-and-brightness">
                    <div id="thickness-column" class="btn-group-vertical" role="group">
                        <div id="thick1" class="thickness-class" onclick="thick1()" style="background-color:black;color:white;"><b>1</b></div>
                        <div id="thick2" class="thickness-class" onclick="thick2()"><b>2</b></div>
                        <div id="thick3" class="thickness-class" onclick="thick3()"><b>3</b></div>
                        <div id="thick4" class="thickness-class" onclick="thick4()"><b>4</b></div>
                        <div id="thick5" class="thickness-class" onclick="thick5()"><b>5</b></div>
                        <div id="thick6" class="thickness-class" onclick="thick6()"><b>6</b></div>
                        <div id="thick7" class="thickness-class" onclick="thick7()"><b>7</b></div>
                        <div id="thick8" class="thickness-class" onclick="thick8()"><b>8</b></div>
                        <div id="thick9" class="thickness-class" onclick="thick9()"><b>9</b></div>
                        <div id="thick10" class="thickness-class" onclick="thick10()"><b>10</b></div>
                        <div id="thick11" class="thickness-class" onclick="thick11()"><b>11</b></div>
                        <div id="thick12" class="thickness-class" onclick="thick12()"><b>12</b></div>
                        <div id="thick13" class="thickness-class" onclick="thick13()"><b>13</b></div>
                        <div id="thick14" class="thickness-class" onclick="thick14()"><b>14</b></div>
                        <div id="thick15" class="thickness-class" onclick="thick15()"><b>15</b></div>
                        <div id="thick16" class="thickness-class" onclick="thick16()"><b>16</b></div>
                        <div id="thick17" class="thickness-class" onclick="thick17()"><b>17</b></div>
                        <div id="thick18" class="thickness-class" onclick="thick18()"><b>18</b></div>
                        <div id="thick19" class="thickness-class" onclick="thick19()"><b>19</b></div>
                        <div id="thick20" class="thickness-class" onclick="thick20()"><b>20</b></div>
                        <div id="thick21" class="thickness-class" onclick="thick21()"><b>21</b></div>
                    </div>
                    <div id="brightness-column" class="btn-group-vertical" role="group">
                        <div id="bright1" class="brightness-class" onclick="bright1()" style="color:white;"><b>1</b></div>
                        <div id="bright2" class="brightness-class" onclick="bright2()" style="color:white;"><b>2</b></div>
                        <div id="bright3" class="brightness-class" onclick="bright3()" style="color:white;"><b>3</b></div>
                        <div id="bright4" class="brightness-class" onclick="bright4()" style="color:white;"><b>4</b></div>
                        <div id="bright5" class="brightness-class" onclick="bright5()" style="color:white;"><b>5</b></div>
                        <div id="bright6" class="brightness-class" onclick="bright6()" style="color:white;"><b>6</b></div>
                        <div id="bright7" class="brightness-class" onclick="bright7()"><b>7</b></div>
                        <div id="bright8" class="brightness-class" onclick="bright8()"><b>8</b></div>
                        <div id="bright9" class="brightness-class" onclick="bright9()"><b>9</b></div>
                        <div id="bright10" class="brightness-class" onclick="bright10()"><b>10</b></div>
                        <div id="bright11" class="brightness-class" onclick="bright11()"><b>11</b></div>
                        <div id="bright12" class="brightness-class" onclick="bright12()"><b>12</b></div>
                        <div id="bright13" class="brightness-class" onclick="bright13()"><b>13</b></div>
                    </div>
                </div>
            </div>
      
            <canvas id="canv"></canvas>
            
            <div id="right-panel">
                <canvas id="color-picker-canvas"></canvas>
                <div id="color-picker-data">
                    <div id="rgb-values" class="input-group">
                        <span class="input-group-addon rgb-label" id="basic-addon1">R</span>
                        <input id="red" value="0" type="text" maxlength="3" class="rgb-input form-control" onchange="rgbChanged()" aria-describedby="basic-addon1">
                        <span class="input-group-addon rgb-label" id="basic-addon2">G</span>
                        <input id="green" value="0" type="text" maxlength="3" class="rgb-input form-control" onchange="rgbChanged()" aria-describedby="basic-addon2">
                        <span class="input-group-addon rgb-label" id="basic-addon3">B</span>
                        <input id="blue" value="0" type="text" maxlength="3" class="rgb-input form-control" onchange="rgbChanged()" aria-describedby="basic-addon3">
                    </div>
                    <div id="show-color"></div>
                    <button type="button" id="whole-pic-button" class="btn btn-primary" style="margin-top:10px;" onclick="spectate()">Whole Picture</button>
                </div>
            </div>
            
        </div>
        
        
        <div id="main-records" style="display:none;">
            
            <div id="rec-container">
        
                <div id="records-header" class="page-header col-md-12">
                    <h3 id="rec-header-text"><a href="/">Home</a> <small><span class="glyphicon glyphicon-menu-right" style="margin-right:10px"></span></small>Records</h3>
                </div>
                
                <div class="col-md-12">
                    <button id="rec-mute-button" type="button" class="btn btn-default" onclick="muteRecordPressed()"><span id="rec-mute-icon" class="glyphicon glyphicon-volume-up"></span></button>
                    <div id="rec-progBar-div" class="progress">
                        <div id="rec-progBar" class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
          
                <div id="rec-side-panel" class="col-sm-3">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title">Records</h3>
                        </div>
                        <div id="rec-panel-body" class="panel-body">
                            <ul id="rec-list" class="list-group">
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-sm-9">
                    <canvas id="rec-canv"></canvas>
                    <!--<video id="vid" width="960" height="540" controls></video>!-->
                </div>
            </div>
        </div>
        
        <div id="loading-popup" class="modal fade bd-example-modal-sm" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">Loading, please wait...</h4>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="upload-popup" class="modal fade bd-example-modal-md" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Audio Files</h4>
                    </div>
                    <div class="modal-body">
                        <div style="height:200px;overflow-y:auto;">
                            <ul id="music-list" class="list-group">
                            </ul>
                        </div>
                        <audio style="width:100%;margin-top:20px;" id="audio-player" autoplay controls></audio>
                    </div>
                    <div class="modal-footer">
                        <input id="audio-input" style="display:inline;float:left;width:400px;margin-top:5px;" type="file" onchange="selectedFile(this)" />
                        <span id="loading-icon" style="visibility: hidden;" class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> 
                        <button id="upload-button" type="button" class="btn btn-primary" disabled="true" onclick="uploadFile()">Upload</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="document.getElementById('audio-player').pause()">Close</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="download-popup" class="modal fade bd-example-modal-sm" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="dl-modal-title">Loading, please wait...</h4>
                        <h6 id="dl-modal-message">Please wait while the video is enconding. Stay focused on this page, otherwise the process will stop. 
                            Download button will be available at the bottom of this popup when it's ready.</h6>
                        <h6 id="dl-modal-status"></h6>
                    </div>
                    <div class="modal-footer">
                        <button id="dl-dismiss-button" style="display:none" type="button" class="btn btn-default" onclick="goHome()">Home</button>
                        <div id="dl-ready-div" style="float:right;margin-left:10px;"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="solo-popup" class="modal fade bd-example-modal-sm" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">New Solo Session</h4>
                    </div>
                    <div class="modal-body" style="height:380px;">
                        <div class="form-group">
                            <label for="solo-name-input">Name</label>
                            <input id="solo-name-input" type="text" autocomplete="off" class="form-control" onclick="clearText()"/>
                        </div>
                        <div class="form-group">
                            <label for="solo-music-picker">Audio</label>
                            <div style="height:100px;overflow-y:auto;">
                                <ul id="solo-music-picker" class="list-group">
                                </ul>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="solo-bg-selector">Background</label>
                            <select id="solo-bg-selector" class="selectpicker">
                                <option value="1">Black</option>
                                <option value="2">White</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="solo-size-selector">Resolution</label>
                            <select id="solo-size-selector" class="selectpicker">
                                <option value="1">640 x 480 (4:3)</option>
                                <option value="2">1024 x 768 (4:3)</option>
                                <option value="3">640 x 360 (16:9)</option>
                                <option value="4">960 x 540 (16:9)</option>
                                <option value="5">1280 x 720 (16:9)</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button id="start-solo-session-button" type="button" class="btn btn-primary" disabled="true" onclick="startSoloSession()">Start</button>
                    </div>
                </div>
            </div>
        </div>
        
        <footer id="footer" class="footer">
            <div class="container">
                <p style="margin-top:20px;margin-bottom:5px;" class="text-muted"><span >© </span>Matija Jeras, FRI UNI, 2016</p>
            </div>
        </footer>
        
        
        
        <script src="/socket.io/socket.io.js"></script>
        <script src="/whammy-master/whammy.js"></script>
        <!--<script src="/RTCRecorder/RecordRTC.js"></script>!-->
        <script src="/client.js"></script>
    </body>
</html>
