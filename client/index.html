<!-- MAIN INDEX PAGE -->

<!doctype html>
<html lang="en" ng-app>
    <head>
        <title>Music Vizualization</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <!-- BOOTSTRAP Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" 
            integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" 
            integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="index.css">
        
        <!-- BOOTSTRAP SELECT Latest compiled and minified CSS -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css">
        <!-- Latest compiled and minified JavaScript -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>
        
        <!-- SPECTRUM for button color pickers -->
        <script src="spectrum/spectrum.js"></script>
        <link rel="stylesheet" href="spectrum/spectrum.css" />
        
        <!-- FFmpeg converter -->
        <!-- <script src="https://4dbefa02675a4cdb7fc25d009516b060a84a3b4b.googledrive.com/host/0B6GWd_dUUTT8WjhzNlloZmZtdzA/ffmpeg_asm.js" async> </script> -->
        
        <!-- favicon -->
        <link rel="shortcut icon" href="/images/favicon.ico" />
        
    </head>
    
    <body>
            
        <div id="main-homepage">
            
            <div class="container">
                
                <div class="col-md-12 page-header">
                    <h3 style="float:left;">Home Page</h4>
                    <button type="button" id="ul-music-button" class="btn btn-primary" style="float:right;margin-top:20px;" onclick="uploadMusic()">Upload Music</button>
                </div>
                
                <div class="row">
                    <div class="col-md-4 portfolio-item">
                        <a onclick="liveSession()" href="#"><img class="img-responsive" src="images/live-banner.jpg" alt=""></a>
                        <h3><a onclick="liveSession()" href="#">Live Session</a></h3>
                        <p>Join your drawing skills with other users to produce a true masterpiece.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a onclick="solo()" href="#"><img class="img-responsive" src="images/solo-banner.jpg" alt=""></a>
                        <h3><a onclick="solo()" href="#">Solo Session</a></h3>
                        <p>Choose audio, resolution and start drawing, you can even undo the most recent action.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a onclick="records()" href="#"><img class="img-responsive" src="images/records-banner.jpg" alt=""></a>
                        <h3><a onclick="records()" href="#">Records</a></h3>
                        <p>Rewatch and download yours or other people's visualizations.</p>
                    </div>
                </div>
            </div>
        </div>
  
        <div id="main-live-session" style="display:none;">
        
            <div class="container">
        
                <div class="col-md-12 page-header">
                    <h3><a href="/">Home</a> <small><span class="glyphicon glyphicon-menu-right" style="margin-right:10px"></span></small>Live Session</h3>
                </div>
                
                <div class="col-md-4">
                    <div id="join-panel" class="panel panel-primary">
                        <div id="join-panel-heading" class="panel-heading clearfix">
                            <h3 class="panel-title pull-left" style="padding-top:6px;"><b>Available Rooms</b></h3>
                            <button id="refresh-button" type="button" class="btn btn-default btn-sm" style="float: right;" onclick="refreshRooms()"><span class="glyphicon glyphicon-refresh"></span></button>
                        </div>
                        <div id="join-panel-body" class="panel-body">
                            <ul id="join-list" class="list-group">
                            </ul>
                        </div>
                        <div id="join-panel-footer" class="panel-footer">
                            <form id="new-room-form" class="input-group" style="width: 100%">
                                <span class="input-group-addon" id="basic-addon1">Create Room:</span>
                                <input id="new-room-input" type="text" autocomplete="off" class="form-control" aria-describedby="basic-addon2">
                            </form>
                        </div>
                        <span id="join-error" class="label label-danger" style="visibility:hidden">Room name too long.</span>
                    </div>
                </div>
          
                <div class="col-md-4">
                    <div id="users-panel" class="panel panel-primary">
                        <div id="users-panel-heading" class="panel-heading">
                            <h3 class="panel-title" style="padding-top:6px;"><b>Users</b></h3>
                        </div>
                        <div id="users-panel-body" class="panel-body">
                            <ul id="users-list" class="list-group">
                            </ul>
                        </div>
                        <div id="user-panel-footer" class="panel-footer">
                            <form id="username-input-form" class="input-group" style="width: 100%">
                                <span class="input-group-addon" id="basic-addon1">Change Username:</span>
                                <input id="username-input" type="text" autocomplete="off" class="form-control" aria-describedby="basic-addon2">
                            </form>
                        </div>
                        <span id="username-error" class="label label-danger" style="visibility:hidden">Username too long.</span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div id="chat-panel" class="panel panel-primary">
                        <div id="chat-panel-heading" class="panel-heading">
                            <h3 class="panel-title" style="padding-top:6px;"><b>Chat</b></h3>
                        </div>
                        <div id="chat-panel-body" class="panel-body">
                        </div>
                        <div id="chat-panel-footer" class="panel-footer">
                            <form id="message-input-form" class="input-group" style="width: 100%">
                                <input id="message-input" type="text" autocomplete="off" class="form-control" placeholder="Your Message" aria-describedby="basic-addon2">
                            </form>
                        </div> 
                    </div>
                </div>
                <div class="col-md-4">
                </div>
                <div id="start-session-div" class="col-md-8" style="visibility:hidden;">
                    <div class="form-group" style="float:left;">
                        <label for="music-picker">Audio</label>
                        <div style="height:150px;overflow-y:auto;">
                            <ul id="music-picker" class="list-group">
                            </ul>
                        </div>
                    </div>
                    <div class="form-group" style="float:right;width:50%;">
                        <label for="bg-selector">Background</label>
                        <select id="bg-selector" class="selectpicker">
                            <option value="1">Black</option>
                            <option value="2">White</option>
                        </select>
                        <label style="margin-top:5px;"for="size-selector">Resolution</label>
                        <div>
                            <div style="width:75%;float:left;">
                                <select id="size-selector" class="selectpicker">
                                    <option value="1">640 x 480 (4:3)</option>
                                    <option value="2">1024 x 768 (4:3)</option>
                                    <option value="3">640 x 360 (16:9)</option>
                                    <option value="4">960 x 540 (16:9)</option>
                                    <option value="5">1280 x 720 (16:9)</option>
                                </select>
                            </div>
                            <div style="width:20%;float:right;">
                                <button id="start-session-button" style="float:right;" type="button" disabled="true" class="btn btn-primary" onclick="createSession()">Start</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            
        <div id="main-live-canvas" style="display:none;padding-top:15px;" class="col-md-12">
            
            <div class="col-md-12" style="padding:0;">
                <canvas id="audio-stamp-canvas"></canvas>
                <div id="progBar-div" class="progress">
                    <div id="time-indicator"><b>0:00 / 0:00</b></div>
                    <div id="progBar" class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        
            <div id="top-row" class="col-md-12">
                <input id="vol-control" type="range" min="0" max="100" step="1" oninput="setVolume(this.value)" onchange="setVolume(this.value)"></input>
                <div id="brightness-row" role="group">
                    <div id="bright1" class="brightness-class" onclick="bright1()"></div>
                    <div id="bright2" class="brightness-class" onclick="bright2()"></div>
                    <div id="bright3" class="brightness-class" onclick="bright3()"></div>
                    <div id="bright4" class="brightness-class" onclick="bright4()"></div>
                    <div id="bright5" class="brightness-class" onclick="bright5()"></div>
                    <div id="bright6" class="brightness-class" onclick="bright6()"></div>
                    <div id="bright7" class="brightness-class" onclick="bright7()"></div>
                    <div id="bright8" class="brightness-class" onclick="bright8()"></div>
                    <div id="bright9" class="brightness-class" onclick="bright9()"></div>
                    <div id="bright10" class="brightness-class" onclick="bright10()"></div>
                    <div id="bright11" class="brightness-class" onclick="bright11()"></div>
                    <div id="bright12" class="brightness-class" onclick="bright12()"></div>
                    <div id="bright13" class="brightness-class" onclick="bright13()"></div>
                </div>
                <div id="solo-row">
                    <button id="new-layer-button" type="button" class="btn btn-primary" style="display:inline;margin-left:10px;" onclick="newLayer()">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                    <button id="finish-solo-button" type="button" class="btn btn-primary" style="display:inline;margin-left:5px;" onclick="finishSolo()">
                        <span class="glyphicon glyphicon-save"></span>
                    </button>
                </div>
                <div id="layers-wrapper">
                    <div>1</div>
                </div>
            </div>
        
            <div id="left-panel">
                
                <div id="thickness-column" class="btn-group-vertical" role="group">
                    <div id="thick1" class="thickness-class" onclick="thick1()" style="background-color:black;color:white;"><b>1</b></div>
                    <div id="thick2" class="thickness-class" onclick="thick2()"><b>2</b></div>
                    <div id="thick3" class="thickness-class" onclick="thick3()"><b>3</b></div>
                    <div id="thick4" class="thickness-class" onclick="thick4()"><b>4</b></div>
                    <div id="thick5" class="thickness-class" onclick="thick5()"><b>5</b></div>
                    <div id="thick6" class="thickness-class" onclick="thick6()"><b>6</b></div>
                    <div id="thick7" class="thickness-class" onclick="thick7()"><b>7</b></div>
                    <div id="thick8" class="thickness-class" onclick="thick8()"><b>8</b></div>
                    <div id="thick9" class="thickness-class" onclick="thick9()"><b>9</b></div>
                    <div id="thick10" class="thickness-class" onclick="thick10()"><b>10</b></div>
                    <div id="thick11" class="thickness-class" onclick="thick11()"><b>11</b></div>
                    <div id="thick12" class="thickness-class" onclick="thick12()"><b>12</b></div>
                    <div id="thick13" class="thickness-class" onclick="thick13()"><b>13</b></div>
                    <div id="thick14" class="thickness-class" onclick="thick14()"><b>14</b></div>
                    <div id="thick15" class="thickness-class" onclick="thick15()"><b>15</b></div>
                    <div id="thick16" class="thickness-class" onclick="thick16()"><b>16</b></div>
                    <div id="thick17" class="thickness-class" onclick="thick17()"><b>17</b></div>
                    <div id="thick18" class="thickness-class" onclick="thick18()"><b>18</b></div>
                    <div id="thick19" class="thickness-class" onclick="thick19()"><b>19</b></div>
                    <div id="thick20" class="thickness-class" onclick="thick20()"><b>20</b></div>
                </div>
                
                <div id="tool-column" class="btn-group-vertical" role="group">
                    <div id="tool1" class="tool" onclick="tool1()" style="background-color:black;color:white;"></div>
                    <div id="tool2" class="tool" onclick="tool2()"></div>
                    <div id="tool3" class="tool" onclick="tool3()"></div>
                    <div id="tool4" class="tool" onclick="tool4()"></div>
                    <div id="tool5" class="tool" onclick="tool5()"></div>
                    <div id="tool6" class="tool" onclick="tool6()"></div>
                </div>
            </div>
            <a id="patent-code" href="https://google.com/patents/WO1998029863A1?cl=en">WO1998029863A1</a>
            <canvas id="canv"></canvas>
            
            <div id="right-panel">
                <canvas id="color-picker-canvas"></canvas>
            </div>
            <video id="vidd"></video>
        </div>
        
        
        <div id="main-records" style="display:none;">
            
            <div id="rec-container">
        
                <div id="records-header" class="page-header col-md-12">
                    <h3 id="rec-header-text"><a href="/">Home</a> <small><span class="glyphicon glyphicon-menu-right" style="margin-right:10px"></span></small>Records</h3>
                </div>
                
                <div class="col-md-12">
                    <button id="rec-mute-button" type="button" class="btn btn-default" onclick="muteRecordPressed()"><span id="rec-mute-icon" class="glyphicon glyphicon-volume-up"></span></button>
                    <div id="rec-progBar-div" class="progress">
                        <div id="rec-progBar" class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
          
                <div id="rec-side-panel" class="col-sm-3">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title">Records</h3>
                        </div>
                        <div id="rec-panel-body" class="panel-body">
                            <ul id="rec-list" class="list-group">
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-sm-9">
                    <canvas id="rec-canv"></canvas>
                    <!--<video id="vid" width="960" height="540" controls></video>!-->
                </div>
            </div>
        </div>
        
        <div id="loading-popup" class="modal fade bd-example-modal-sm" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">Loading, please wait...</h4>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="upload-popup" class="modal fade bd-example-modal-md" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Audio Files</h4>
                    </div>
                    <div class="modal-body">
                        <div style="height:200px;overflow-y:auto;">
                            <ul id="music-list" class="list-group">
                            </ul>
                        </div>
                        <audio style="width:100%;margin-top:20px;" id="audio-player" autoplay controls></audio>
                    </div>
                    <div class="modal-footer">
                        <input id="audio-input" style="display:inline;float:left;width:400px;margin-top:5px;" type="file" onchange="selectedFile(this)" />
                        <span id="loading-icon" style="visibility: hidden;" class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> 
                        <button id="upload-button" type="button" class="btn btn-primary" disabled="true" onclick="uploadFile()">Upload</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="document.getElementById('audio-player').pause()">Close</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="download-popup" class="modal fade bd-example-modal-sm" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="dl-modal-title">Loading, please wait...</h4>
                        <h6 id="dl-modal-message">Please wait while the video is enconding. Stay focused on this page, otherwise the process will stop. 
                            Download button will be available at the bottom of this popup when it's ready.</h6>
                        <h6 id="dl-modal-status"></h6>
                    </div>
                    <div class="modal-footer">
                        <button id="dl-dismiss-button" style="display:none" type="button" class="btn btn-default" onclick="goHome()">Home</button>
                        <div id="dl-ready-div" style="float:right;margin-left:10px;"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="solo-popup" class="modal fade bd-example-modal-md" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">New Solo Session</h4>
                    </div>
                    <div class="modal-body" style="height:300px;overflow-y:auto;">
                        <div class="form-group">
                            <label for="solo-music-picker">Audio</label>
                            <div>
                                <ul id="solo-music-picker" class="list-group">
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-default" onclick="startSoloSession(true)">Brez Glasbe</button>
                        <button id="start-text-editor-button" type="button" class="btn btn-primary" disabled="true" onclick="startTextEditor()">Naprej</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="text-popup" class="modal fade bd-example-modal-lg" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true" style="width:1312px;margin:auto;">
                <div class="modal-content">
                    <div id="text-popup-header" class="modal-header">
                        
                        <div id="textChangeDiv">
                            <input type='text' id="textColorButton" />
                            <div style="width:61.58%;float:left;margin-right:10px;">
                                <select id="textFontDropdown" class="textSelect">
                                    <option id="arial-option" value="1">Arial</option>
                                    <option id="verdana-option" value="2">Verdana</option>
                                    <option id="calibri-option" value="3">Calibri</option>
                                    <option id="tnr-option" value="4">Times New Roman</option>
                                    <option id="georgia-option" value="5">Georgia</option>
                                    <option id="cn-option" value="6">Courier New</option>
                                    <option id="lc-option" value="7">Lucida Console</option>
                                    <option id="brush-option" value="8">Čopič</option>
                                </select>
                            </div>
                            <div style="width:20%;float:left;margin-right:10px;">
                                <select id="textSizeDropdown" class="textSelect">
                                    <option value="1">16</option>
                                    <option value="2">24</option>
                                    <option value="3">32</option>
                                    <option value="4">40</option>
                                    <option value="5">48</option>
                                    <option value="5">60</option>
                                    <option value="5">75</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-left:10px;float:left;padding-top:5px;">
                            <label id="checkbox-label"><input type="checkbox" id="text-borders" /> Mreža</label>
                        </div>
                        
                        <div style="width:30%;float:right;">
                            <select id="textSelectDropdown" class="textSelect">
                            </select>
                        </div>
                        
                        <button id="text-remove-button" type="button" onclick="textRemove()">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                        
                        <button id="text-add-button" type="button" disabled="true" onclick="textAdd()">
                            <span class="glyphicon glyphicon-plus-sign"></span>
                        </button>
                        <div style="float:right;margin-right:10px;">
                            <input type='text' id="bgColorButton" />
                        </div>
                        
                    </div>
                    <div id="text-popup-body" class="modal-body">
                        <canvas id="text-canvas" style="width:1280px;height:720px;" tabindex="1"></canvas>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Zapri</button>
                        <button id="start-solo-session-button" type="button" class="btn btn-primary" onclick="startSoloSession(false)">Začni</button>
                    </div>
                </div>
        </div>
        
        <footer id="footer" class="footer">
            <div class="container">
                <p style="margin-top:20px;margin-bottom:5px;" class="text-muted"><span >© </span>Matija Jeras, FRI UNI, 2016</p>
            </div>
        </footer>
        
        
        
        <script src="/socket.io/socket.io.js"></script>
        <script src="/whammy-master/whammy.js"></script>
        <!--<script src="/RTCRecorder/RecordRTC.js"></script>!-->
        <script src="/client.js"></script>
    </body>
</html>
